#{{- if semverCompare "> 1.24-0" .Capabilities.KubeVersion.Version }}
apiVersion: {{ template "apiVersion.AdmissionConfiguration" . }}
# apiVersion: apiserver.config.k8s.io/v1
kind: AdmissionConfiguration
plugins:
 - name: PodSecurity
   configuration:
     apiVersion: pod-security.admission.config.k8s.io/v1
     kind: PodSecurityConfiguration
     defaults:
       enforce: "privileged"
       enforce-version: "latest"
       audit: "privileged"
       audit-version: "latest"
       warn: "privileged"
       warn-version: "latest"
     exemptions:
       # Array of authenticated usernames to exempt.
       usernames: []
       # Array of runtime class names to exempt.
       runtimeClasses: [sandboxed]
       # Array of namespaces to exempt.
       namespaces: []
       # {{- end -}}
