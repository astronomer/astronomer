---
suite: Test fluentd-configmap
templates:
  - fluentd-configmap.yaml
tests:
  - it: should work
    asserts:
      - isKind:
          of: ConfigMap
  - it: should work with use_server_side_encryption # <https://github.com/astronomer/issues/issues/2687>
    set:
      fluentd.s3.use_server_side_encryption: AES256
      fluentd.s3.enabled: true
      fluentd.s3.path: airflow/logs/gibson
    asserts:
      - isKind:
          of: ConfigMap
      # Should contain the right strings
