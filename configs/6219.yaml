# https://docs.astronomer.io/software/install-airgapped

global:
  astronomer:
    houston:
      secret:
        - envName: "AUTH__OPENID_CONNECT__OKTA__CLIENT_ID"
          secretName: "okta-client-id"
          secretKey: "okta_client_id"
        - envName: "AUTH__OPENID_CONNECT__OKTA__CLIENT_SECRET"
          secretName: "okta-client-secret"
          secretKey: "okta_client_secret"
        - envName: "EMAIL__SMTP_URL" # Reference to the Kubernetes secret for SMTP credentials. Can be removed if email is not used.
          secretName: "astronomer-smtp"
          secretKey: "connection"
        - envName: "EMAIL__SMTP_URL" # Reference to the Kubernetes secret for SMTP credentials. Can be removed if email is not used.
          secretName: "astronomer-smtp"
          secretKey: "connection"
  helmRepo: "http://artifactory.example.com:32775/artifactory/astro-helm-chart"
  privateRegistry:
    enabled: true
    repository: quay.io

astronomer:
  commander:
    airGapped:
      enabled: true
  houston:
    config:
      deployments:
        helm:
          runtimeImages:
            airflow:
              repository: quay.io/astronomer/astro-runtime
            flower:
              repository: quay.io/astronomer/astro-runtime
          airflow:
            defaultAirflowRepository: quay.io/astronomer/ap-airflow
            defaultRuntimeRepository: quay.io/astronomer/astro-runtime
            extraEnv:
              - name: AIRFLOW__ASTRONOMER__UPDATE_URL
                value: http://astronomer-releases.astronomer.svc.cluster.local/astronomer-runtime
            images:
              airflow:
                repository: quay.io/astronomer/ap-airflow
              statsd:
                repository: quay.io/astronomer/ap-statsd-exporter
              redis:
                repository: quay.io/astronomer/ap-redis
              pgbouncer:
                repository: quay.io/astronomer/ap-pgbouncer
              pgbouncerExporter:
                repository: quay.io/astronomer/ap-pgbouncer-exporter
              gitSync:
                repository: quay.io/astronomer/ap-git-sync
    updateCheck: # There is a 2nd check for Astronomer platform updates but this is deprecated and not actively used. Therefore disable
      enabled: false
    updateAirflowCheck: # Configure URL for Airflow updates check
      url: http://astronomer-releases.astronomer.svc.cluster.local/astronomer-certified
    updateRuntimeCheck: # Configure URL for Airflow updates check
      url: http://astronomer-releases.astronomer.svc.cluster.local/astronomer-runtime
